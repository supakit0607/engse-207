# สถาปัตยกรรม N-Tier (N-Tier Architecture)

โปรเจกต์นี้ใช้รูปแบบสถาปัตยกรรม N-Tier (N-Tier architecture pattern) แบบคลาสสิก รูปแบบนี้จะแยกแอปพลิเคชันออกเป็นเลเยอร์เชิงตรรกะ (logical layers) ซึ่งแต่ละเลเยอร์มีความรับผิดชอบเฉพาะตัว การแยกความรับผิดชอบ (separation of concerns) นี้ทำให้แอปพลิเคชันดูแลรักษาง่ายขึ้น ปรับขนาดได้ และพัฒนาได้ง่ายขึ้น

แอปพลิเคชันแบ่งออกเป็นเทียร์ (tiers) ดังต่อไปนี้:

## 1. เทียร์การนำเสนอ (Presentation Tier)

นี่คือเลเยอร์ที่ผู้ใช้เห็น (user-facing layer) ของแอปพลิเคชัน มีหน้าที่นำเสนอข้อมูลแก่ผู้ใช้และจัดการอินพุตของผู้ใช้

-   **ส่วนหน้า (Frontend):** ไดเรกทอรี `public/` ประกอบด้วยไฟล์ HTML, CSS และ JavaScript ที่สร้างส่วนติดต่อผู้ใช้ (user interface) ส่วนหน้าจะโต้ตอบกับส่วนหลัง (backend) ผ่านการเรียก API แบบ RESTful
-   **เส้นทาง API (API Routes):** ไดเรกทอรี `src/routes/` กำหนดจุดสิ้นสุด API (API endpoints) เส้นทางเหล่านี้จะจัดการคำขอ HTTP ที่เข้ามาและส่งต่อตรรกะทางธุรกิจไปยังเทียร์ธุรกิจ

## 2. เทียร์ธุรกิจ (Business Tier หรือ Logic Tier)

เทียร์นี้ประกอบด้วยตรรกะทางธุรกิจหลัก (core business logic) ของแอปพลิเคชัน มีหน้าที่ประมวลผลข้อมูล บังคับใช้กฎทางธุรกิจ (business rules) และตัดสินใจ

-   **บริการ (Services):** ไดเรกทอรี `src/services/` ประกอบด้วยตรรกะทางธุรกิจ ตัวอย่างเช่น ไฟล์ `taskService.js` จัดการตรรกะสำหรับการสร้าง อัปเดต และลบงาน ทำหน้าที่เป็นสะพานเชื่อมระหว่างเทียร์การนำเสนอ (Presentation Tier) และเทียร์การเข้าถึงข้อมูล (Data Access Tier)

## 3. เทียร์การเข้าถึงข้อมูล (Data Access Tier)

เทียร์นี้มีหน้าที่รับผิดชอบการสื่อสารทั้งหมดกับฐานข้อมูล โดยจะแยกฐานข้อมูล (abstracts the database) ออกจากส่วนที่เหลือของแอปพลิเคชัน ดังนั้นเทียร์ธุรกิจจึงไม่จำเป็นต้องทราบรายละเอียดการใช้งานฐานข้อมูล

-   **Repository:** ไดเรกทอรี `src/repositories/` ประกอบด้วยตรรกะการเข้าถึงข้อมูล (data access logic) ตัวอย่างเช่น ไฟล์ `taskRepository.js` ประกอบด้วยคำสั่ง SQL เพื่อโต้ตอบกับตาราง `tasks` ในฐานข้อมูล PostgreSQL

## 4. เทียร์ข้อมูล (Data Tier)

นี่คือฐานข้อมูลจริงที่จัดเก็บข้อมูล ในโปรเจกต์นี้ เราใช้ PostgreSQL

## การไหลของข้อมูล (Data Flow)

คำขอ (request) ทั่วไปจะไหลผ่านเทียร์ต่างๆ ดังนี้:

1.  ผู้ใช้โต้ตอบกับส่วนหน้า (เทียร์การนำเสนอ) ซึ่งส่งคำขอ HTTP ไปยังจุดสิ้นสุด API
2.  เส้นทาง API (เทียร์การนำเสนอ) ได้รับคำขอและเรียกใช้ฟังก์ชันในบริการที่เกี่ยวข้อง (เทียร์ธุรกิจ)
3.  บริการ (เทียร์ธุรกิจ) ดำเนินการตรรกะทางธุรกิจและเรียกใช้ฟังก์ชันใน repository (เทียร์การเข้าถึงข้อมูล) เพื่อเข้าถึงฐานข้อมูล
4.  repository (เทียร์การเข้าถึงข้อมูล) ดำเนินการคำสั่ง SQL กับฐานข้อมูล (เทียร์ข้อมูล)
5.  ข้อมูลจะถูกส่งกลับขึ้นไปตามเลเยอร์ต่างๆ ไปยังส่วนหน้า ซึ่งจะแสดงให้ผู้ใช้เห็น

สถาปัตยกรรมแบบเลเยอร์ (layered architecture) นี้ช่วยให้มีการแยกความรับผิดชอบ (separation of concerns) ที่ชัดเจน ทำให้แอปพลิเคชันมีความทนทาน (robust) มากขึ้นและจัดการได้ง่ายขึ้น
